<template>
    <div class="px-4 bg-white">

        <header class="flex justify-between items-center">
            <div class="mb-6 space-y-1">

                <h1 class="text-xl font-bold font-merriweathersans leading-6 text-black">Gestion des transactions </h1>
                <p class="text-neutral-30 text-sm font-normal">Commissions facturées aux utilisateurs et aux partenaires
                </p>
            </div>

            <div>
                <notification-icon></notification-icon>
            </div>
        </header>


        <div class="flex justify-between my-4">
            <section class="flex gap-2 items-center">
                <p class="text-[18px] font-semibold">Transactions</p>
                <div>
                    <span
                        class="text-xs font-medium px-[5px] py-[1px]  rounded-xl border text-[#633DA5] border-[#633DA5]">600
                        Transactions</span>
                </div>
            </section>
            <section>
                <Button variant="outline" class="rounded-[8px]">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M15.8332 13.2362H4.16651C3.39571 13.23 2.65439 12.9392 2.085 12.4197C1.51561 11.9001 1.15833 11.1884 1.08184 10.4214C1.00534 9.65438 1.21503 8.88616 1.67059 8.26437C2.12615 7.64258 2.79544 7.2111 3.54984 7.05284C3.54984 6.96118 3.54984 6.86951 3.54984 6.77784C3.54924 5.77707 3.8631 4.8014 4.44708 3.98867C5.03106 3.17595 5.85563 2.56725 6.80431 2.24857C7.75299 1.92988 8.77782 1.91733 9.73402 2.21267C10.6902 2.50802 11.5295 3.09634 12.1332 3.89451C12.513 3.73457 12.921 3.65239 13.3332 3.65284C14.1613 3.65504 14.9549 3.98499 15.5405 4.57057C16.126 5.15614 16.456 5.94972 16.4582 6.77784C16.4665 6.86932 16.4665 6.96136 16.4582 7.05284C17.2132 7.2113 17.883 7.64345 18.3385 8.2661C18.794 8.88876 19.0031 9.65791 18.9255 10.4255C18.8479 11.1931 18.4891 11.9048 17.9182 12.4237C17.3473 12.9426 16.6047 13.232 15.8332 13.2362ZM4.11651 8.23618C3.61923 8.24281 3.14495 8.44671 2.798 8.80303C2.45106 9.15935 2.25988 9.6389 2.26651 10.1362C2.27314 10.6335 2.47704 11.1077 2.83336 11.4547C3.18968 11.8016 3.66923 11.9928 4.16651 11.9862H15.8332C16.3305 11.9862 16.8074 11.7886 17.159 11.437C17.5106 11.0854 17.7082 10.6085 17.7082 10.1112C17.7082 9.6139 17.5106 9.13698 17.159 8.78535C16.8074 8.43372 16.3305 8.23618 15.8332 8.23618H15.7165C15.6129 8.24433 15.5089 8.22616 15.4142 8.18337C15.3195 8.14058 15.2372 8.07455 15.1748 7.99141C15.1125 7.90827 15.0721 7.81072 15.0576 7.70783C15.043 7.60493 15.0547 7.50002 15.0915 7.40284C15.165 7.1967 15.2044 6.97998 15.2082 6.76118C15.2076 6.42108 15.1144 6.08755 14.9388 5.79631C14.7632 5.50507 14.5116 5.26709 14.2111 5.10784C13.9106 4.9486 13.5724 4.87408 13.2328 4.89229C12.8932 4.91049 12.5649 5.02072 12.2832 5.21118C12.2124 5.26043 12.132 5.29407 12.0472 5.30988C11.9624 5.32568 11.8753 5.32328 11.7915 5.30284C11.7079 5.28548 11.629 5.25049 11.56 5.20019C11.491 5.14989 11.4336 5.08545 11.3915 5.01118C11.0846 4.47101 10.6397 4.02205 10.1023 3.71019C9.56498 3.39832 8.95446 3.23475 8.33317 3.23618C7.39454 3.23838 6.49498 3.61222 5.83127 4.27594C5.16755 4.93965 4.79371 5.83921 4.79151 6.77784C4.79358 7.00756 4.81871 7.23648 4.86651 7.46118C4.88346 7.55502 4.87956 7.65145 4.85508 7.74362C4.8306 7.83579 4.78613 7.92145 4.72484 7.99451C4.66408 8.06701 4.58725 8.12435 4.50046 8.16196C4.41366 8.19957 4.31929 8.21642 4.22484 8.21118L4.11651 8.23618ZM11.0082 17.5945L12.8082 15.7945C12.9186 15.676 12.9787 15.5193 12.9758 15.3574C12.973 15.1955 12.9074 15.041 12.7929 14.9265C12.6783 14.812 12.5239 14.7464 12.3619 14.7435C12.2 14.7407 12.0433 14.8008 11.9248 14.9112L10.1165 16.7112C10.1017 16.7273 10.0836 16.7402 10.0636 16.7491C10.0435 16.7579 10.0218 16.7625 9.99984 16.7625C9.9779 16.7625 9.9562 16.7579 9.93612 16.7491C9.91604 16.7402 9.89801 16.7273 9.88317 16.7112L8.07484 14.9028C8.01629 14.8448 7.94689 14.7989 7.87061 14.7678C7.79432 14.7366 7.71264 14.7207 7.63023 14.7211C7.54782 14.7215 7.46629 14.7381 7.3903 14.77C7.31431 14.8019 7.24534 14.8485 7.18734 14.907C7.0702 15.0253 7.00484 15.1852 7.00562 15.3516C7.006 15.434 7.02262 15.5156 7.05451 15.5916C7.08641 15.6675 7.13296 15.7365 7.19151 15.7945L8.99151 17.6028C9.26194 17.8645 9.62352 18.0108 9.99984 18.0108C10.3762 18.0108 10.7377 17.8645 11.0082 17.6028V17.5945Z"
                            fill="#1A1A1A" />
                    </svg>
                    <span class="text-xs text-neutral-10 font-medium">
                        Télécharger le rapport
                    </span>

                </Button>

            </section>
        </div>

        <div class="h-[1px] bg-neutral-70 my-5"></div>

        <section class="flex justify-between mb-4">
            <div class="flex gap-3">
                <CommonDatesFilter :update-handler="() => { }"></CommonDatesFilter>
                <CommonSelect title="Trier par"
                    :elements="[{ name: 'Tout', value: 'all' }, { name: 'En cours', value: 'en cours' }, { name: 'Termine', value: 'termine' }]">
                    <template #icon>
                        <svg width="18" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M13.3297 0.0416565H2.74295C2.08178 0.0416565 1.44769 0.304306 0.980168 0.771825C0.512649 1.23934 0.25 1.87344 0.25 2.53461V4.57052C0.254866 5.21758 0.511137 5.8374 0.964646 6.29897L4.08915 9.46501C4.56587 9.94707 4.83186 10.5986 4.82872 11.2766V15.6392C4.82764 16.065 4.94426 16.4828 5.16569 16.8465C5.38712 17.2102 5.70475 17.5056 6.08351 17.7001C6.46217 17.8947 6.88685 17.9821 7.31159 17.9528C7.73634 17.9235 8.145 17.7786 8.49336 17.5339L9.6235 16.7029C9.91354 16.4981 10.1502 16.2267 10.3136 15.9115C10.477 15.5962 10.5624 15.2464 10.5625 14.8913V11.4012C10.5589 11.0397 10.631 10.6814 10.7741 10.3494C10.9173 10.0174 11.1282 9.71897 11.3935 9.47332L14.9086 6.34052C15.1683 6.10818 15.3765 5.82397 15.5196 5.50622C15.6627 5.18846 15.7377 4.84423 15.7395 4.49573V2.50137C15.7313 1.86011 15.4763 1.24668 15.0275 0.788587C14.5787 0.330494 13.9706 0.0629811 13.3297 0.0416565ZM1.5214 4.57052V2.50137C1.5214 2.34134 1.55306 2.1829 1.61455 2.03516C1.67604 1.88742 1.76615 1.7533 1.87969 1.64053C1.99323 1.52776 2.12796 1.43857 2.27611 1.37809C2.42427 1.31761 2.58293 1.28704 2.74295 1.28813H6.72336L3.2083 6.77263L1.87873 5.42643C1.76521 5.31472 1.67512 5.18148 1.61377 5.0345C1.55241 4.88753 1.52101 4.72979 1.5214 4.57052ZM14.5429 4.49573C14.544 4.6675 14.509 4.83758 14.4403 4.99502C14.3716 5.15245 14.2707 5.29375 14.1441 5.40981L10.6207 8.54262C10.218 8.90206 9.89588 9.34253 9.67534 9.83516C9.4548 10.3278 9.34085 10.8615 9.34096 11.4012V14.908C9.34068 15.0624 9.30361 15.2146 9.23279 15.3519C9.16199 15.4892 9.05948 15.6076 8.93378 15.6974L7.79533 16.5284C7.63532 16.6339 7.44993 16.6946 7.25849 16.7042C7.06704 16.7137 6.87653 16.6718 6.70681 16.5827C6.5371 16.4936 6.39437 16.3606 6.29352 16.1976C6.19266 16.0346 6.13735 15.8475 6.13337 15.6558V11.2766C6.13442 10.2725 5.74041 9.3084 5.03647 8.59248L4.10576 7.68671L8.21082 1.28813H13.3297C13.489 1.28813 13.6468 1.31951 13.794 1.38048C13.9412 1.44146 14.0749 1.53082 14.1876 1.64348C14.3002 1.75614 14.3896 1.88989 14.4506 2.03708C14.5115 2.18428 14.5429 2.34204 14.5429 2.50137V4.49573Z"
                                fill="#808080" />
                        </svg>
                    </template>
                </CommonSelect>
            </div>
            <SearchBar class="w-[28%]"></SearchBar>

        </section>

        <!-- Transactions table -->
        <CommonDataTable :dynamic-width-columns="false" :total="transactionData.length"
            :columns="transactionsManagementColumn" :data="data" @prev-page="prevPage" @next-page="nextPage">
        </CommonDataTable>





    </div>
</template>

<script setup lang="ts">
import CommonDataTable from '@/components/common/commonDataTable.vue';
import CommonDatesFilter from '@/components/common/commonDatesFilter.vue';
import CommonSelect from '@/components/common/commonSelect.vue';
import notificationIcon from '@/components/svg/notificationIcon.vue';
import { transactionData, transactionsManagementColumn } from '@/components/main/transactionsManagement/tables/transactionsManagementColumn';
import { Button } from '@/components/ui/button';
import SearchBar from '@/components/users/SearchBar.vue';
import type { TransactionType } from '@/interfaces/datatable.interface';
import { onMounted, watch } from 'vue';
import { ref } from 'vue';

onMounted(async () => {
    data.value = await getData()
})


async function getData(): Promise<TransactionType[]> {
    // Fetch data from your API here.
    return [
        ...transactionData.slice(0, 10)
    ]
}

const data = ref<TransactionType[]>([])



const nextPage = async () => {
    // data.value = await getData()

    data.value = transactionData.slice(10, 20)
}

const prevPage = async () => {
    // data.value = await getData()
    data.value = transactionData.slice(0, 10)
}


</script>

<style scoped></style>